(function(e){function t(t){for(var s,r,o=t[0],l=t[1],d=t[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(m.length)m.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s,n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"form-modal-error"},[a("b",[e._v("Folgende Fehler sind aufgetreten:")]),a("div",[e._v(e._s(e.error))])]),1==e.loading?a("div",{staticClass:"overlay"},[a("i",{staticClass:"fa fas fa-sync-alt fa-spin"})]):e._e(),a("div",{attrs:{id:"main-box"}},[a("Calendar",{attrs:{list:e.list,acl:e.acl}})],1),a("Item",{attrs:{acl:e.acl}}),a("Events",{attrs:{acl:e.acl}})],1)},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"calendar"},[a("div",{staticClass:"calendar-header"},[a("button",{staticClass:"btn btn-app chevron-left",on:{click:e.subtractWeek}},[a("i",{staticClass:"fa fa-arrow-left"}),e._v("Vor\n          ")]),a("button",{staticClass:"btn btn-app",on:{click:e.gotoToday}},[a("i",{staticClass:"fa fa-home"}),e._v("Heute\n          ")]),a("h3",[e._v(e._s(e.$date(e.firstDayOfWeek).format("DD."))+" - "+e._s(e.$date(e.lastDayOfWeek).format("DD. MMMM YYYY")))]),a("button",{staticClass:"btn btn-app chevron-right",on:{click:e.addWeek}},[a("i",{staticClass:"fa fa-arrow-right"}),e._v("Weiter\n          ")])]),a("table",{staticClass:"table_1 noPadding"},[a("thead",[a("tr",e._l(e.daysInWeek,(function(t,s){return a("td",{key:s,class:{"bg-orange":1==e.isToday(t)},on:{click:function(a){return e.handlerSelectDay(t)}}},[e._v("\n              "+e._s(e.$date(t).format("DD. dd"))+"\n\n            ")])})),0)]),a("tbody",[a("tr",e._l(e.daysInWeek,(function(t,s){return a("td",{key:s},e._l(e.getEintrag(t),(function(s,n){return a("div",{key:n,staticClass:"padding-t-m"},e._l(s.gruppen,(function(s,n){return a("div",{key:n,staticClass:"margin-l-m margin-r-m"},[a("div",{staticClass:"gruppe padding-s box_1 "},[a("div",{on:{click:function(t){return e.openEintrag(s)}}},[a("div",{staticClass:"text-big-2"},[s.gruppe.farbe?a("span",{staticClass:"border-radius",staticStyle:{width:"2rem",height:"2rem",display:"inline-block"},style:{backgroundColor:s.gruppe.farbe}}):e._e(),e._v("\n                        "+e._s(s.gruppe.name))]),a("div",{staticClass:"padding-t-s padding-b-s"},[s.schueler.length>0&&0==s.gruppe.absenz_anz?a("span",{staticClass:" text-grau bg-white border-radius padding-t-xs padding-b-xs padding-l-s padding-r-s margin-r-m text-bold",style:{color:s.gruppe.farbe}},[a("i",{staticClass:"fa fa-child margin-r-m"}),e._v(e._s(s.schueler.length)+"\n                        ")]):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:s.gruppe.absenz_anz,expression:"gruppe.gruppe.absenz_anz"}],staticClass:"bg-white  text-grau border-radius padding-t-xs padding-b-xs padding-l-s padding-r-s margin-r-m text-bold",style:{color:s.gruppe.farbe}},[a("i",{staticClass:"fa fa-child margin-r-m"}),e._v(e._s(s.schueler.length-s.gruppe.absenz_anz)+" "),a("span",{staticClass:"text-small"},[e._v("("+e._s(s.schueler.length)+")")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:s.gruppe.absenz_anz,expression:"gruppe.gruppe.absenz_anz"}],staticClass:"bg-white  text-red border-radius padding-t-xs padding-b-xs padding-l-s padding-r-s margin-r-m text-bold"},[a("i",{staticClass:"fa fa-bed margin-r-m"}),e._v(e._s(s.gruppe.absenz_anz)+"\n                        ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:s.gruppe.raum,expression:"gruppe.gruppe.raum"}],staticClass:"flex-1 margin-t-m text-grey"},[a("i",{staticClass:"fas fa-map-marker-alt"}),e._v(" "+e._s(s.gruppe.raum))])])]),a("div",{staticClass:"flex",on:{click:function(a){return e.openEvent(s,t)}}},[e._l(s.events,(function(t,s){return a("div",{key:s,staticClass:"padding-s line-oddEven"},[a("div",{},[e._v(e._s(t.title))]),a("div",{staticClass:"text-small text-right"},[e._v(e._s(t.room))])])})),a("button",{directives:[{name:"show",rawName:"v-show",value:!s.events[0],expression:"!gruppe.events[0]"}],staticClass:"btn text-grey"},[a("i",{staticClass:"fa fa-calendar"}),e._v(" Events")])],2)])])})),0)})),0)})),0)])])])])},l=[],d=a("bd86"),c=(a("ac6a"),{name:"Calendar",props:{list:Array,acl:Object},data:function(){return{today:this.$date(),thisWeek:!1}},created:function(){this.thisWeek=this.today,this.changedDate();var e=this;EventBus.$on("calender--reload",(function(t){e.changedDate()}))},computed:{firstDayOfWeek:function(){return this.thisWeek.startOf("week")},lastDayOfWeek:function(){return this.thisWeek.endOf("week")},daysInWeek:function(){for(var e=[],t=this.firstDayOfWeek,a=0;a<7;a++)1==globals.showDays[t.format("dd")]&&e.push([t]),t=t.add(1,"day");return e},daysInWeekFull:function(){for(var e=[],t=this.firstDayOfWeek,a=0;a<7;a++)1==globals.showDays[t.format("dd")]&&e.push([t.format("YYYY-MM-DD"),t.format("dd")]),t=t.add(1,"day");return e}},methods:(s={handlerSelectDay:function(e){console.log(e)},openEvent:function(e,t){var a=this;EventBus.$emit("events--open",{item:e,day:a.$date(t).format("YYYY-MM-DD")})},openEintrag:function(e){EventBus.$emit("item--open",{item:e})},showBuchenBtn:function(e){return!1},isToday:function(e){return!!this.today.isSame(e,"day")},subtractWeek:function(){this.thisWeek=this.thisWeek.subtract(1,"week"),this.changedDate()},addWeek:function(){this.thisWeek=this.thisWeek.add(1,"week"),this.changedDate()},gotoToday:function(){this.thisWeek=this.today,this.changedDate()},changedDate:function(){EventBus.$emit("calendar--changedDate",{von:this.firstDayOfWeek.unix(),bis:this.lastDayOfWeek.unix(),days:this.daysInWeekFull})},openForm:function(e){EventBus.$emit("form--open",{item:{date:e}})},getEintrag:function(e){if(this.list.length<=0)return"";e=this.$date(e).format("YYYY-MM-DD");var t=[];return this.list.forEach((function(a){e==a[0]&&t.push(a)})),t}},Object(d["a"])(s,"openEintrag",(function(e){EventBus.$emit("item--open",{item:e})})),Object(d["a"])(s,"orderEintrag",(function(e){if(!e.id)return!1;EventBus.$emit("item--order",{item:e})})),s)}),u=c,m=a("2877"),p=Object(m["a"])(u,o,l,!1,null,null,null),f=p.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.modalActive,expression:"modalActive"}],staticClass:"form-modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.handlerCloseModal(t)}}},[a("div",{staticClass:"form form-style-2 form-modal-content width-40vw"},[a("div",{staticClass:"form-modal-close",on:{click:e.handlerCloseModal}},[a("i",{staticClass:"fa fa-times"})]),a("br"),a("div",{staticClass:"text-big-2"},[e._v(e._s(e.item.gruppe.name))]),a("div",{staticClass:"padding-t-s padding-b-s"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.item.schueler.length,expression:"item.schueler.length"}],staticClass:"text-white bg-grau border-radius padding-t-xs padding-b-xs padding-l-s padding-r-s margin-r-m text-bold",style:{backgroundColor:e.item.gruppe.farbe}},[a("i",{staticClass:"fa fa-child margin-r-m"}),e._v(e._s(e.item.schueler.length))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.item.gruppe.absenz_anz,expression:"item.gruppe.absenz_anz"}],staticClass:"bg-red text-white border-radius padding-t-xs padding-b-xs padding-l-s padding-r-s margin-r-m text-bold"},[a("i",{staticClass:"fa fa-bed margin-r-m"}),e._v(e._s(e.item.gruppe.absenz_anz))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.item.gruppe.raum,expression:"item.gruppe.raum"}],staticClass:"flex-1"},[a("i",{staticClass:"fas fa-map-marker-alt"}),e._v(" "+e._s(e.item.gruppe.raum))])]),a("div",{staticClass:"margin-t-m"},e._l(e.item.schueler,(function(t,s){return a("div",{key:s,staticClass:"box_odd padding-t-s padding-b-s flex-row"},[a("span",{staticClass:"flex-3 padding-l-s",class:{"text-line-through":t.absenz}},[e._v("\n          "+e._s(t.rufname)+" "+e._s(t.name)+"\n        ")]),a("span",{staticClass:"flex-1 text-right padding-r-s"},["m"==t.geschlecht?a("i",{staticClass:"fa fa-mars",staticStyle:{color:"blue"},attrs:{"aria-hidden":"true"}}):e._e(),"w"==t.geschlecht?a("i",{staticClass:"fa fa-venus",staticStyle:{color:"red"},attrs:{"aria-hidden":"true"}}):e._e(),a("span",{staticClass:"margin-l-s"},[e._v(e._s(t.klasse))])]),a("div",{staticClass:"flex-b-100 padding-s text-right text-small"},[e._v(e._s(t.info))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.absenz,expression:"schueler.absenz"}],staticClass:"flex-b-100 padding-s flex-row"},[e._m(0,!0),a("div",{staticClass:"flex-2 text-right"},[a("div",{staticClass:"text-small text-grey margin-b-s"},[a("i",{staticClass:"fa fa-clock"}),e._v(" "+e._s(t.absenz_info.stunden))]),a("div",{staticClass:"text-small text-grey",domProps:{innerHTML:e._s(t.absenz_info.notiz)}},[e._v(e._s(t.absenz_info.notiz))])])])])})),0)])])},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"text-red flex-1 padding-l-m"},[a("i",{staticClass:"fa fa-bed"}),e._v(" Absenz")])}],h=(a("c5f6"),a("5df2"),a("a481"),{name:"Item",props:{dates:Array,acl:Object},data:function(){return{modalActive:!1,deleteBtn:!1,error:!1,item:{gruppe:{},schueler:{}}}},created:function(){var e=this;EventBus.$on("item--open",(function(t){t.item&&(e.item=t.item,e.modalActive=!0)}))},computed:{},methods:{handlerClickDelete:function(){this.deleteBtn=!0},handlerClickDeleteSecond:function(e){return!!e.id&&(EventBus.$emit("item--delete",{item:e}),this.handlerCloseModal(),!1)},openForm:function(e){return!!e&&(EventBus.$emit("form--open",{item:e}),this.handlerCloseModal(),!1)},replaceFloat:function(e){return!!e&&Number.parseFloat(e).toFixed(2).replace(".",",")},handlerCloseModal:function(){this.modalActive=!1,this.deleteBtn=!1}}}),b=h,_=Object(m["a"])(b,g,v,!1,null,null,null),C=_.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.modalActive,expression:"modalActive"}],staticClass:"form-modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.handlerCloseModal(t)}}},[a("div",{staticClass:"form form-style-2 form-modal-content width-40vw"},[a("div",{staticClass:"form-modal-close",on:{click:e.handlerCloseModal}},[a("i",{staticClass:"fa fa-times"})]),a("br"),a("div",{staticClass:"text-big-2"},[e._v(e._s(e.item.gruppe.name))]),a("div",{staticClass:"padding-t-s padding-b-s"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.item.schueler.length,expression:"item.schueler.length"}],staticClass:"text-white bg-grau border-radius padding-t-xs padding-b-xs padding-l-s padding-r-s margin-r-m text-bold",style:{backgroundColor:e.item.gruppe.farbe}},[a("i",{staticClass:"fa fa-child margin-r-m"}),e._v(e._s(e.item.schueler.length))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.item.gruppe.absenz_anz,expression:"item.gruppe.absenz_anz"}],staticClass:"bg-red text-white border-radius padding-t-xs padding-b-xs padding-l-s padding-r-s margin-r-m text-bold"},[a("i",{staticClass:"fa fa-bed margin-r-m"}),e._v(e._s(e.item.gruppe.absenz_anz))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.item.gruppe.raum,expression:"item.gruppe.raum"}],staticClass:"flex-1"},[a("i",{staticClass:"fas fa-map-marker-alt"}),e._v(" "+e._s(e.item.gruppe.raum))])]),a("div",{staticClass:"margin-t-m"},e._l(e.item.events,(function(t,s){return a("div",{key:s,staticClass:"padding-s line-oddEven",on:{click:function(a){return e.handlerEdit(t)}}},[a("div",{},[e._v(e._s(t.title))]),a("div",{staticClass:"text-small text-right"},[e._v(e._s(t.room))])])})),0),a("div",{staticClass:"margin-t-m border-t padding-m bg-grau-hell"},[a("div",{staticClass:"padding-s"},[a("label",[e._v("Titel")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],staticClass:"width-100p",attrs:{type:"text"},domProps:{value:e.form.title},on:{input:function(t){t.target.composing||e.$set(e.form,"title",t.target.value)}}})]),a("div",{staticClass:"padding-s"},[a("label",{staticClass:"width-7rem"},[e._v("Raum")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.room,expression:"form.room"}],staticClass:"width-100p",attrs:{type:"text"},domProps:{value:e.form.room},on:{input:function(t){t.target.composing||e.$set(e.form,"room",t.target.value)}}})]),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.form.id,expression:"!form.id"}],staticClass:"btn width-100p margin-t-m",on:{click:function(t){return e.handlerSubmit()}}},[a("i",{staticClass:"fa fa-save"}),e._v("Hinzufügen")]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.form.id,expression:"form.id"}],staticClass:"btn width-100p margin-t-m",on:{click:function(t){return e.handlerSubmit()}}},[a("i",{staticClass:"fa fa-save"}),e._v("Speichern")])])])])},w=[],y={name:"Events",props:{acl:Object},data:function(){return{modalActive:!1,deleteBtn:!1,error:!1,item:{gruppe:{},schueler:{},events:{}},form:{id:!1,title:"",room:"",day:!1,gruppeID:!1}}},created:function(){var e=this;EventBus.$on("events--open",(function(t){t.item&&(e.item=t.item,e.form.day=t.day,e.form.gruppeID=t.item.gruppe.id,e.modalActive=!0)})),EventBus.$on("events--close",(function(t){e.handlerCloseModal()}))},computed:{},methods:{handlerEdit:function(e){e.id&&(this.form.id=e.id,this.form.title=e.title,this.form.room=e.room)},handlerSubmit:function(){EventBus.$emit("events--insert",{item:this.form})},handlerClickDelete:function(){this.deleteBtn=!0},handlerClickDeleteSecond:function(e){return!!e.id&&(EventBus.$emit("item--delete",{item:e}),this.handlerCloseModal(),!1)},openForm:function(e){return!!e&&(EventBus.$emit("form--open",{item:e}),this.handlerCloseModal(),!1)},replaceFloat:function(e){return!!e&&Number.parseFloat(e).toFixed(2).replace(".",",")},handlerCloseModal:function(){this.modalActive=!1,this.deleteBtn=!1,this.form={id:!1,title:"",room:"",day:!1,gruppeID:!1}}}},k=y,E=Object(m["a"])(k,x,w,!1,null,null,null),D=E.exports,z=a("bc3a").default,$={name:"app",components:{Calendar:f,Events:D,Item:C},data:function(){return{loading:!1,error:!1,list:[],acl:globals.acl}},created:function(){var e=this;EventBus.$on("events--insert",(function(t){e.ajaxPost("index.php?page=ganztagsCalendar&action=setEvent",{},{data:JSON.stringify(t.item)},(function(e,t){e.data&&1!=e.data.error?(EventBus.$emit("events--close",{}),EventBus.$emit("calender--reload",{})):t.error=e.data.msg,console.log("done",e.data)}),(function(){console.log("error")}))}),(function(){console.log("error")})),EventBus.$on("calendar--changedDate",(function(t){e.ajaxGet("index.php?page=ganztagsCalendar&action=getWeek",{days:JSON.stringify(t.days)},(function(e,t){e.data&&1!=e.data.error?t.list=e.data:t.list=[]}))}),(function(){console.log("error")}))},methods:{ajaxGet:function(e,t,a,s,n){this.loading=!0;var i=this;z.get(e,{params:t}).then((function(e){a&&"function"===typeof a&&a(e,i)})).catch((function(e){e&&"function"===typeof s&&s(e)})).finally((function(){n&&"function"===typeof n&&n(),i.loading=!1}))},ajaxPost:function(e,t,a,s,n,i){this.loading=!0;var r=this;z.post(e,t,{params:a}).then((function(e){s&&"function"===typeof s&&s(e,r)})).catch((function(e){e&&"function"===typeof n&&n(e)})).finally((function(){i&&"function"===typeof i&&i(),r.loading=!1}))}}},O=$,B=Object(m["a"])(O,i,r,!1,null,null,null),W=B.exports,M=a("5a0c"),j=a.n(M);a("6210");window.EventBus=new n["a"],j.a.locale("de"),Object.defineProperties(n["a"].prototype,{$date:{get:function(){return j.a}}}),n["a"].config.productionTip=!1;var N=!1;N=N||{objekt:!1},new n["a"]({render:function(e){return e(W)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map